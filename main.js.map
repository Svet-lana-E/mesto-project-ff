{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/webpack/bootstrap","webpack://mesto-project-ff/webpack/runtime/define property getters","webpack://mesto-project-ff/webpack/runtime/hasOwnProperty shorthand","webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const configApi = {\n  baseUrl: 'https://mesto.nomoreparties.co/v1/wff-cohort-38',\n  headers: {\n    authorization: '187e31d4-6e25-4812-bdb8-27a500552f6b',\n    'Content-Type': 'application/json'\n  }\n}\n\n//getting initial cards and used data\n\nconst handleResponse = (res) => {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Ошибка: ${res.status}`); // если ошибка, отклоняем промис\n}\n\nexport const showResponseError = (err) => {\n  console.log(err); // выводим ошибку в консоль\n}\n\nexport const getInitialCards = () => {\n  return fetch(configApi.baseUrl + '/cards', {\n    headers: configApi.headers,\n  })\n  .then(handleResponse)\n}\n\nexport const getUserData = () => {\n  return fetch(configApi.baseUrl + '/users/me', {\n    headers: configApi.headers,\n  })\n  .then(handleResponse)\n}\n\n// edit profile\n\nexport const editProfileApi = (title, description) => {\n  return fetch(configApi.baseUrl + '/users/me', {\n    method: \"PATCH\",\n    headers: configApi.headers,\n    body: JSON.stringify({\n      name: title,\n      about: description,\n    })\n  })\n  .then(handleResponse)\n}\n\n// add new card\n\nexport const createNewCardApi = (cardName, cardLink) => {\n  return fetch(configApi.baseUrl + '/cards', {\n    method: \"POST\",\n    headers: configApi.headers,\n    body: JSON.stringify({\n      name: cardName,\n      link: cardLink,\n    })\n  })\n  .then(handleResponse)\n}\n\n// delete card\n\nexport const deleteCardApi = (card) => {\n  return fetch(configApi.baseUrl + '/cards/' + card.dataset.cardId, {\n    method: \"DELETE\",\n    headers: configApi.headers,\n    })\n  .then(handleResponse)\n}\n\n// card like\nexport const setLike = (card) => {\n  return fetch(configApi.baseUrl + '/cards/likes/' + card.dataset.cardId, {\n    method: \"PUT\",\n    headers: configApi.headers,\n  })\n  .then(handleResponse)\n}\n\n// card dislike\n\nexport const removeLike = (card) => {\n  return fetch(configApi.baseUrl + '/cards/likes/' + card.dataset.cardId, {\n    method: \"DELETE\",\n    headers: configApi.headers,\n  })\n  .then(handleResponse)\n}\n\n// edit user avatar\n\nexport const editUserImage = (avatarLink) => {\n  return fetch(configApi.baseUrl + '/users/me/avatar', {\n    method: \"PATCH\",\n    headers: configApi.headers,\n    body: JSON.stringify({\n      avatar: avatarLink,\n    })\n  })\n  .then(handleResponse)\n}","import {card} from '../index.js';\nimport {showResponseError, setLike, removeLike} from './api.js';\n\n// @todo: Функция создания карточки\n\nexport function createCard(name, link, number, cardId, cardOwnerId, userId, likeButtonIsActive, openDeleteConfirmPopup, openPopupCard) {\n  const cardElement = card.cloneNode(true);\n  const buttonDeleteCard = cardElement.querySelector('.card__delete-button');\n  const buttonLikeCard = cardElement.querySelector('.card__like-button');\n  const cardImage = cardElement.querySelector('.card__image');\n  cardElement.querySelector('.card__title').textContent = name;\n  cardImage.src = link;\n  cardImage.alt = name;\n  cardElement.querySelector('.card__like-counter').textContent = number.length;\n  cardElement.dataset.cardId = cardId;\n  if(cardOwnerId !== userId) {\n    cardElement.querySelector('.card__delete-button').style = 'display: none';\n  }\n  buttonDeleteCard.addEventListener('click', (evt) => {\n    evt.preventDefault();\n    openDeleteConfirmPopup(evt.target.closest('li'));\n    buttonDeleteCard.blur();\n  });\n  if(number.some(user => user._id === userId)) {\n    buttonLikeCard.classList.add('card__like-button_is-active');\n  }\n  buttonLikeCard.addEventListener('click', function(){\n    likeButtonIsActive(buttonLikeCard, cardElement);\n    buttonLikeCard.blur();\n  });\n  cardImage.addEventListener('click', function(){openPopupCard(name, link)});\n  return cardElement;\n};\n\n// card likeButton is active\n\nexport function likeButtonIsActive(likeButton, card) {\n  if(likeButton.classList.contains('card__like-button_is-active')) {\n    removeLike(card)\n      .then((data) => {\n        card.querySelector('.card__like-counter').textContent = data.likes.length;\n      })\n      .then(() => {\n        likeButton.classList.remove('card__like-button_is-active')\n      })\n      .catch(showResponseError)\n  } else {\n    setLike(card)\n      .then((data) => {\n        card.querySelector('.card__like-counter').textContent = data.likes.length;\n      })\n      .then(() => {\n        likeButton.classList.add('card__like-button_is-active')\n      })\n      .catch(showResponseError)\n  }\n} \n\n","// popup animation function\n\nexport function animatePopup(popup) {\n  popup.classList.add('popup_is-animated');\n}\n\n// popup open + add eventListener Esc +++++++++\n\nexport function openPopup (popup) {\n  popup.classList.add('popup_is-opened');\n  document.addEventListener('keydown', closeEscPopup);\n}\n\n//close popup +++++++++++++\n\nexport function closePopup(popup) {\n  popup.classList.remove('popup_is-opened');\n  document.removeEventListener('keydown', closeEscPopup);\n}\n\n// close  popup with Esc\n\nfunction closeEscPopup(evt) {\n  if(evt.key === 'Escape') {\n    const popup = document.querySelector('.popup_is-opened');\n    closePopup(popup);\n  }\n}\n\n// close popup through overlay +++++++++++\n\nexport function closeOverlayPopup(evt) {\n  if (evt.target.classList.contains('popup_is-opened')){\n    closePopup(evt.target);\n  }\n}","//show form validation error\n\nconst showInputError = (formElement, element, config, errorMessage) => {\n  const errorElement = formElement.querySelector(`.${element.id}-error`);\n  element.classList.add(config.inputErrorClass);\n  errorElement.classList.add(config.errorClass);\n  errorElement.textContent = errorMessage;\n}\n \n//hide form validation error\n\nconst hideInputError = (formElement, element, config) => {\n  const errorElement = formElement.querySelector(`.${element.id}-error`);\n  element.classList.remove(config.inputErrorClass);\n  errorElement.classList.remove(config.errorClass);\n  errorElement.textContent = '';\n}\n\n// all inputs validation checking\n\nconst isValid = (formElement, element, config) => {\n  if (element.validity.patternMismatch) {\n    element.setCustomValidity(element.dataset.errorMessage);\n  } else {\n    element.setCustomValidity('');\n  }\n  if(!element.validity.valid) {\n    showInputError(formElement, element, config, element.validationMessage);\n  } else {\n    hideInputError(formElement, element, config)\n  }\n}\n\n//all inputs setting eventlistener\n\nconst setEventListeners = (formElement, config) => {\n  const inputList = Array.from(formElement.querySelectorAll(config.inputSelector));\n  const buttonElement = formElement.querySelector(config.submitButtonSelector);\n  toggleButtonState(inputList, buttonElement, config);\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener('input', () => {\n      isValid(formElement, inputElement, config);\n      toggleButtonState(inputList, buttonElement, config);\n\n    })\n  })\n}\n\n//form validation initializing\n\nexport const enableValidation = (config) => {\n  const formList = Array.from(document.querySelectorAll(config.formSelector));\n  formList.forEach((formElement) => {\n    setEventListeners (formElement, config);\n  })\n}\n\n//any invalid input checking\n\nconst hasInvalidInput =(inputList) => {\n  return inputList.some((inputElement) => {\n    return !inputElement.validity.valid;\n  })\n}\n\n// form button condition toggling\n\nconst toggleButtonState = (inputList, buttonElement, config) => {\n  if (hasInvalidInput(inputList)) {\n    buttonElement.disabled = true;\n    buttonElement.classList.add(config.inactiveButtonClass);\n  } else {\n    buttonElement.disabled = false;\n    buttonElement.classList.remove(config.inactiveButtonClass);\n  }\n}\n\n//form validation clearing\n\nexport const clearValidation = (formElement, config) => {\n  const inputList = Array.from(formElement.querySelectorAll(config.inputSelector));\n  const buttonElement = formElement.querySelector(config.submitButtonSelector);\n  const errorElementList = Array.from(formElement.querySelectorAll(`.${config.errorClass}`));\n  inputList.forEach((element) => {\n    element.classList.remove(config.inputErrorClass);\n  });\n  errorElementList.forEach((errorElement) => {\n    errorElement.classList.remove(config.errorClass);\n    errorElement.textContent = '';\n  })\n  buttonElement.disabled = true;\n  buttonElement.classList.add(config.inactiveButtonClass);\n}\n","import './index.css';\n//import {initialCards} from './scripts/cards.js';\nimport {createCard, likeButtonIsActive} from './scripts/card.js';\nimport {openPopup, closePopup, animatePopup, closeOverlayPopup} from '../src/scripts/modal.js';\nimport {enableValidation, clearValidation} from './scripts/validation.js';\nimport {showResponseError, getInitialCards, getUserData, editProfileApi, createNewCardApi, editUserImage, deleteCardApi} from './scripts/api.js';\n\n// @todo: Темплейт карточки\n\nconst cardTemplate = document.querySelector('#card-template').content;\n\n// @todo: DOM узлы\n\nexport const card = cardTemplate.querySelector('.card');\nexport const cardList = document.querySelector('.places__list');\nconst popups = document.querySelectorAll('.popup');\nexport const popupEdit = document.querySelector('.popup_type_edit');\nexport const popupNewCard = document.querySelector('.popup_type_new-card');\nconst popupImage = document.querySelector('.popup_type_image');\nconst popupEditProfileImage = document.querySelector('.popup_type_edit-avatar');\nconst photoPopupImage = popupImage.querySelector('.popup__image');\nconst namePopupImage = popupImage.querySelector('.popup__caption');\nconst profile = document.querySelector('.profile');\nconst buttonEditProfile = profile.querySelector('.profile__edit-button');\nconst buttonAddNewPlace = profile.querySelector('.profile__add-button');\nconst profileDescription = profile.querySelector('.profile__description');\nconst profileTitle = profile.querySelector('.profile__title');\nconst profileImage = profile.querySelector('.profile__image');\nconst buttonEditProfileImage = profile.querySelector('.profile__edit-avatar');\nconst formEditProfile = document.forms['edit-profile'];\nconst formEditProfileAvatar = document.forms['edit-avatar'];\nconst inputLinkFormEditProfileAvatar = formEditProfileAvatar.querySelector('.popup__input_type_avatar_link');\nconst inputNameFormEditProfile = formEditProfile.querySelector('.popup__input_type_name');\nconst inputDescriptionEditProfile = formEditProfile.querySelector('.popup__input_type_description');\nconst formNewPlace = document.forms['new-place'];\nconst inputNameFormNewPlace = formNewPlace.querySelector('.popup__input_type_card-name');\nconst inputLinkFormNewPlace = formNewPlace.querySelector('.popup__input_type_url');\nconst deleteConfirmPopup = document.querySelector('.popup_type_delete-confirm');\nconst buttonConfirmDelete = deleteConfirmPopup.querySelector('.button');\nlet userId;\nlet cardForDelete;\n\n// form validation config\n\nconst validationConfig = {\n  formSelector: '.popup__form',\n  inputSelector: '.popup__input',\n  submitButtonSelector: '.popup__button',\n  inactiveButtonClass: 'popup__button_disabled',\n  inputErrorClass: 'popup__input_type_error',\n  errorClass: 'popup__error_visible'\n};\n\n// fill-in profile\nconst fillProfileData = (userData) => {\n  profileTitle.textContent = userData.name;\n  profileDescription.textContent = userData.about;\n}\n\n// saving process button\n\nconst savingButtonInProcess = (formElement, text) => {\n  formElement.querySelector('.popup__button').textContent = text;\n}\n\n//getting initial card-list + user data API\nPromise.all([getInitialCards(), getUserData()])\n  .then(([initialCards, userData]) => {\n    userId = userData._id;\n    initialCards.forEach((card) => {\n      cardList.append(createCard(card.name, card.link, card.likes, card._id, card.owner._id, userId, likeButtonIsActive, openDeleteConfirmPopup, openPopupCard));\n    });\n    fillProfileData(userData);\n    profileImage.style = `background-image: url(${userData.avatar})`;\n  })\n  .catch(showResponseError);\n\n// edit profile in editForm (method without API)\n/*function editProfile(title, description) {\n  profileTitle.textContent = title;\n  profileDescription.textContent = description;\n  return profileTitle.textContent, profileDescription.textContent;\n}*/\n\n// popup bigSize card\n\nexport function openPopupCard(popupImageName, popupImageLink) {\n  namePopupImage.textContent = popupImageName;\n  photoPopupImage.src = popupImageLink;\n  photoPopupImage.alt = popupImageName;\n  openPopup(popupImage);\n} \n\n// open popup delete card\nexport const openDeleteConfirmPopup = (currentCardElement) => {\n  openPopup(deleteConfirmPopup);\n  cardForDelete = currentCardElement;\n}\n\n// confirm delete card \n\nbuttonConfirmDelete.addEventListener('click', () => {\n    deleteCardApi(cardForDelete)\n    .then(() => {\n      cardForDelete.remove();\n      closePopup(deleteConfirmPopup);\n    })\n    .catch(showResponseError);\n  })\n\n// popups animation\n\npopups.forEach(function(element) {\n  animatePopup(element);\n  addEventListener('click', closeOverlayPopup);\n  const buttonClosePopup = element.querySelector('.popup__close');\n  buttonClosePopup.addEventListener('click', function(){\n    closePopup(element)}\n  );\n});\n\n// @todo: Вывести карточки на страницу (method without API)\n/*initialCards.forEach(element => {\n  cardList.append(createCard(element.name, element.link, removeCard, likeButtonIsActive, openPopupCard));\n})*/\n\n// open popup +++++++++++++ \n\nbuttonEditProfile.addEventListener('click', function(){ //edit\n  clearValidation(formEditProfile, validationConfig); \n  openPopup(popupEdit);\n  inputNameFormEditProfile.value = profileTitle.textContent;\n  inputDescriptionEditProfile.value = profileDescription.textContent;\n  buttonEditProfile.blur();\n});\n\nbuttonAddNewPlace.addEventListener('click', function(){ // newcard\n  clearValidation(formNewPlace, validationConfig);\n  openPopup(popupNewCard);\n  formNewPlace.reset();\n  buttonAddNewPlace.blur();\n});\n\nbuttonEditProfileImage.addEventListener('click', () => { // edit avatar\n  clearValidation(formEditProfileAvatar, validationConfig);\n  openPopup(popupEditProfileImage);\n  buttonEditProfileImage.blur();\n  inputLinkFormEditProfileAvatar.value = '';\n});\n\n// edit profile ++++++++++++++\n\nformEditProfile.addEventListener('submit', function(evt){\n  evt.preventDefault();\n  savingButtonInProcess(formEditProfile, 'Сохранение...');\n  editProfileApi(inputNameFormEditProfile.value, inputDescriptionEditProfile.value)\n    .then((userData) => {fillProfileData(userData)})\n    .then(() => {closePopup(popupEdit)})\n    .catch(showResponseError)\n    .finally(() => {savingButtonInProcess(formEditProfile, 'Сохранить')})\n})\n\n// add new place ++++++++++++++\n\nformNewPlace.addEventListener('submit', function(evt){\n  evt.preventDefault();\n  savingButtonInProcess(formNewPlace, 'Сохранение...');\n  createNewCardApi(inputNameFormNewPlace.value, inputLinkFormNewPlace.value)\n    .then((card) => {\n      cardList.prepend(createCard(card.name, card.link, card.likes, card._id, card.owner._id, userId, likeButtonIsActive, openDeleteConfirmPopup, openPopupCard));\n    })\n    .then(() => {closePopup(popupNewCard)})\n    .catch(showResponseError)\n    .finally(() => {savingButtonInProcess(formNewPlace, 'Сохранить')})\n})\n\n// form validation\n\nenableValidation(validationConfig);\n\n// edit user avatar\n\nformEditProfileAvatar.addEventListener('submit', (evt) => {\n  evt.preventDefault();\n  savingButtonInProcess(formEditProfileAvatar, 'Сохранение...');\n  editUserImage(inputLinkFormEditProfileAvatar.value)\n    .then((userData) => {\n      profileImage.style = `background-image: url(${userData.avatar})`;\n      closePopup(popupEditProfileImage)})\n    .catch(showResponseError)\n    .finally(() => {savingButtonInProcess(formEditProfileAvatar, 'Сохранить')})\n})"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","configApi","baseUrl","headers","authorization","handleResponse","res","ok","json","Promise","reject","concat","status","showResponseError","err","console","log","createCard","name","link","number","cardId","cardOwnerId","userId","likeButtonIsActive","openDeleteConfirmPopup","openPopupCard","cardElement","card","cloneNode","buttonDeleteCard","querySelector","buttonLikeCard","cardImage","textContent","src","alt","length","dataset","style","addEventListener","evt","preventDefault","target","closest","blur","some","user","_id","classList","add","likeButton","contains","fetch","method","then","removeLike","data","likes","remove","catch","setLike","openPopup","popup","document","closeEscPopup","closePopup","removeEventListener","closeOverlayPopup","toggleButtonState","inputList","buttonElement","config","inputElement","validity","valid","hasInvalidInput","disabled","inactiveButtonClass","clearValidation","formElement","Array","from","querySelectorAll","inputSelector","submitButtonSelector","errorElementList","errorClass","forEach","element","inputErrorClass","errorElement","cardForDelete","content","cardList","popups","popupEdit","popupNewCard","popupImage","popupEditProfileImage","photoPopupImage","namePopupImage","profile","buttonEditProfile","buttonAddNewPlace","profileDescription","profileTitle","profileImage","buttonEditProfileImage","formEditProfile","forms","formEditProfileAvatar","inputLinkFormEditProfileAvatar","inputNameFormEditProfile","inputDescriptionEditProfile","formNewPlace","inputNameFormNewPlace","inputLinkFormNewPlace","deleteConfirmPopup","buttonConfirmDelete","validationConfig","formSelector","fillProfileData","userData","about","savingButtonInProcess","text","popupImageName","popupImageLink","all","_ref","_ref2","initialCards","append","owner","avatar","currentCardElement","deleteCardApi","value","reset","title","description","body","JSON","stringify","finally","cardName","cardLink","prepend","patternMismatch","setCustomValidity","errorMessage","id","hideInputError","showInputError","validationMessage","isValid","setEventListeners","avatarLink"],"sourceRoot":""}